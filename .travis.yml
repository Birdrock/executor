language: go

go:
  - 1.3

install:
  - go get -v github.com/cloudfoundry-incubator/garden && pushd $GOPATH/src/github.com/cloudfoundry-incubator/garden && git checkout 0eceab52842f4d238c3caf2ec2ef0ada30e8dacd && popd
  - go get -t -v ./...
  - go install github.com/onsi/ginkgo/ginkgo
  - curl -L https://github.com/coreos/etcd/releases/download/v0.4.6/etcd-v0.4.6-linux-amd64.tar.gz | tar zxf - -C /tmp
  - mv /tmp/etcd-v0.4.6-linux-amd64/etcd $HOME/gopath/bin
  - go get github.com/apcera/gnatsd

before_script:
  - export PATH=$HOME/gopath/bin:$PATH

script: ginkgo -r -race -failOnPending -randomizeAllSpecs
